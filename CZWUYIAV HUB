-- ===== CZWUYIAV HUB GUI =====
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

local Window = Fluent:CreateWindow({
    Title = "CZWUYIAV HUB " .. Fluent.Version,
    SubTitle = "czwuy_AV",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 580),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
    Main = Window:AddTab({ Title = "Main", Icon = "" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "" })
}

Fluent:Notify({Title="Notification", Content="Script Loaded", Duration=5})

-- ===== Services =====
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local UIS = game:GetService("UserInputService")

-- ===== Character Helper =====
local function GetCharacter(plr)
    if plr and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
        return plr.Character.HumanoidRootPart
    end
    return nil
end

local humanoid
local function UpdateHumanoid()
    local char = LocalPlayer.Character
    if char then humanoid = char:FindFirstChildOfClass("Humanoid") end
end
LocalPlayer.CharacterAdded:Connect(function(char) char:WaitForChild("Humanoid"); UpdateHumanoid() end)
UpdateHumanoid()

-- ===== Teleport GUI =====
local PlayerDropdown = Tabs.Main:AddDropdown("TP_Players", {
    Title = "Select Player",
    Values = (function()
        local list = {}
        for _, plr in ipairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then table.insert(list, plr.Name) end
        end
        return list
    end)(),
    Multi = false
})

task.spawn(function()
    while true do
        PlayerDropdown:SetValues((function()
            local list = {}
            for _, plr in ipairs(Players:GetPlayers()) do
                if plr ~= LocalPlayer then table.insert(list, plr.Name) end
            end
            return list
        end)())
        task.wait(2)
    end
end)

local ModeDropdown = Tabs.Main:AddDropdown("TP_Mode", {
    Title = "Teleport Mode",
    Values = {"Instant","Tween"},
    Multi = false,
    Default = "Instant"
})

local TP_Toggle = Tabs.Main:AddToggle("TP_Toggle",{Title="Teleport", Default=false})
TP_Toggle:OnChanged(function(value) TP_Toggle.Value = value end)

task.spawn(function()
    while true do
        task.wait()
        if TP_Toggle.Value then
            local targetName = PlayerDropdown.Value
            if targetName and targetName~="" then
                local target = Players:FindFirstChild(targetName)
                local myHRP = GetCharacter(LocalPlayer)
                local targetHRP = GetCharacter(target)
                if myHRP and targetHRP then
                    if ModeDropdown.Value=="Instant" then
                        myHRP.CFrame = targetHRP.CFrame * CFrame.new(0,0,-3)
                    else
                        local info = TweenInfo.new((myHRP.Position-targetHRP.Position).Magnitude/250, Enum.EasingStyle.Linear)
                        local tween = TweenService:Create(myHRP, info, {CFrame=targetHRP.CFrame*CFrame.new(0,0,-3)})
                        tween:Play()
                        task.spawn(function()
                            while TP_Toggle.Value and tween.PlaybackState==Enum.PlaybackState.Playing do
                                task.wait(0.1)
                            end
                            tween:Cancel()
                        end)
                    end
                end
            end
        end
    end
end)

-- ===== Aimbot Toggle =====
local AimbotToggle = Tabs.Main:AddToggle("Aimbot_Toggle",{Title="Aimbot", Default=false})
AimbotToggle:OnChanged(function(v) AimbotToggle.Value = v end)

task.spawn(function()
    while true do
        task.wait()
        if AimbotToggle.Value then
            local targetName = PlayerDropdown.Value
            if targetName and targetName ~= "" then
                local target = Players:FindFirstChild(targetName)
                local myHRP = GetCharacter(LocalPlayer)
                local targetHRP = GetCharacter(target)
                if myHRP and targetHRP then
                    local dir = (targetHRP.Position - myHRP.Position).Unit
                    myHRP.CFrame = CFrame.new(myHRP.Position, myHRP.Position + dir)
                end
            end
        end
    end
end)

-- ===== No-Stun Toggle =====
local NoStunToggle = Tabs.Main:AddToggle("NoStun_Toggle",{Title="No-Stun", Default=false})
NoStunToggle:OnChanged(function(v) NoStunToggle.Value = v end)

task.spawn(function()
    while true do
        task.wait(0.1)
        if NoStunToggle.Value and humanoid then
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Stunned,false)
        end
    end
end)

-- ===== Auto Hit Toggle =====
local HitToggle = Tabs.Main:AddToggle("AutoHit_Toggle", {Title = "Auto Hit Skill", Default = false})
local HitModeDropdown = Tabs.Main:AddDropdown("Hit_Mode",{Title="Hit Mode",Values={"Auto","Selected Player"},Multi=false,Default="Auto"})
local TargetHitDropdown = Tabs.Main:AddDropdown("Hit_Target",{Title="Target Player",Values=(function()
    local list = {}
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer then table.insert(list, plr.Name) end
    end
    return list
end)(), Multi=false})

-- Auto update player list
task.spawn(function()
    while true do
        TargetHitDropdown:SetValues((function()
            local list = {}
            for _, plr in ipairs(Players:GetPlayers()) do
                if plr ~= LocalPlayer then table.insert(list, plr.Name) end
            end
            return list
        end)())
        task.wait(2)
    end
end)

local SkillKeyDropdown = Tabs.Main:AddDropdown("Skill_Key",{Title="Skill Key",Values={"Z","X","C","V","F"},Multi=false,Default="Z"})

local function GetClosestTarget(maxDist)
    local myChar = LocalPlayer.Character
    if not myChar then return nil end
    local myHRP = myChar:FindFirstChild("HumanoidRootPart")
    if not myHRP then return nil end
    maxDist = maxDist or 80
    local closest
    local distMin = maxDist
    for _,plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character then
            local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                local d = (myHRP.Position - hrp.Position).Magnitude
                if d < distMin then
                    distMin = d
                    closest = plr
                end
            end
        end
    end
    return closest
end

local function AutoHit()
    local target
    if HitModeDropdown.Value == "Auto" then
        target = GetClosestTarget(80)
    else
        local name = TargetHitDropdown.Value
        if name and name ~= "" then target = Players:FindFirstChild(name) end
    end
    if not target or not target.Character then return end

    local remote = game.ReplicatedStorage:FindFirstChild("SkillRemote")
    if remote then
        remote:FireServer(target)
        Fluent:Notify({Title="Auto Hit",Content="Hit "..target.Name,Duration=2})
    end
end

UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if not HitToggle.Value then return end
    local key = SkillKeyDropdown.Value
    if input.KeyCode == Enum.KeyCode[key] then
        AutoHit()
    end
end)

-- ===== Save / Interface =====
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:SetFolder("FluentScriptHub")
SaveManager:SetFolder("FluentScriptHub/specific-game")
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)
Window:SelectTab(1)
Fluent:Notify({Title="CZWUYIAV AV",Content="Script Loaded Successfully",Duration=8})
